<?php
/**
 * @file
 * Code for the Ding campaign ctype feature.
 */

include_once 'ding_campaign_ctype.features.inc';

/**
 * Implements hook_form_FORM_ID_alter().
 */
function ding_campaign_ctype_form_ding_campaign_node_form_alter(&$form, &$form_state, $form_id) {
  if ($form_id = 'ding_campaign_node_form') {
    // Add states for form elements based on Campaign settings selected options.
    $form['field_camp_text_full']['#states'] = array(
      'visible' => array(
        ':input[name="field_camp_settings[und]"]' => array('value' => 'full'),
      ),
    );
    $form['field_camp_text_plain']['#states'] = array(
      'visible' => array(
        ':input[name="field_camp_settings[und]"]' => array('value' => 'plain'),
      ),
    );
  }
}

/**
 * Implements hook_field_group_build_pre_render_alter().
 */
function ding_campaign_ctype_field_group_build_pre_render_alter(&$element) {
  // Add states for image fieldsets.
  if (!empty($element['group_ding_campaign_images'])) {
    $element['group_ding_campaign_images']['#states'] = array(
      'visible' => array(
        ':input[name="field_camp_settings[und]"]' => array('value' => 'image'),
      ),
    );
  }
}
